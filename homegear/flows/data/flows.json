[{"disabled":false,"id":"af5f5744.c39ba","info":"","label":"MySmarthomeAdmin","namespace":"tab","type":"tab"},{"broker":"localhost","clientid":"","id":"9c814888.ebc608","namespace":"mqtt","port":"1883","type":"mqtt-broker","usetls":false,"z":""},{"broker":"9c814888.ebc608","id":"f0855ab9.825048","loopprevention":false,"looppreventiongroup":"","name":"SetHeatingWeekProfile","namespace":"mqtt","topic":"cmdhomegear/SetHeatingWeekProfile","type":"mqtt-in","wires":[[{"id":"d37cc093.2c0d","port":0}]],"x":240,"y":250,"z":"af5f5744.c39ba"},{"active":true,"complete":"true","console":"debtab","id":"d37cc093.2c0d","loglevel":"info","name":"","namespace":"debug","type":"debug","wires":[],"x":1110,"y":330,"z":"af5f5744.c39ba"},{"broker":"9c814888.ebc608","id":"4b1d2fc7.96b23","loopprevention":false,"looppreventiongroup":"","name":"RetrieveHeatingWeekProfile","namespace":"mqtt","topic":"cmdhomegear/RetrieveHeatingWeekProfile","type":"mqtt-in","wires":[[{"id":"643dfa2a.586b44","port":0}]],"x":265,"y":110,"z":"af5f5744.c39ba"},{"func":"$hg->log(4, \"GetHeatingWeekProfile\");\n$payload = $message['payload'];\n$room = $payload['room'];\n$peerId;\nif (strcasecmp($room, \"livingroom\") == 0) {\n    $peerId = 5; \n} elseif (strcasecmp($room, \"bathroom\") == 0) {\n    $peerId = 8; \n} elseif (strcasecmp($room, \"kitchen\") == 0) {\n    $peerId = 10; \n} elseif (strcasecmp($room, \"office\") == 0) {\n    $peerId = 1; \n} \n$profile;\nif (isset($peerId)) {\n    $profile = $hg->getParamset($peerId, 0);\n}\n$result['data'] = $profile;\n$result['room'] = $room;\n$message['payload'] = $result;\nreturn $message;","id":"c5cbd9f5.28fac8","inputs":1,"name":"GetHeatingWeekProfile","namespace":"function","noerr":0,"outputs":1,"type":"function","wires":[[{"id":"42e7ef4d.eeef6","port":0},{"id":"d37cc093.2c0d","port":0}]],"x":735,"y":50,"z":"af5f5744.c39ba"},{"id":"643dfa2a.586b44","name":"","namespace":"parsers","type":"json","wires":[[{"id":"c5cbd9f5.28fac8","port":0},{"id":"d37cc093.2c0d","port":0}]],"x":430,"y":40,"z":"af5f5744.c39ba"},{"id":"42e7ef4d.eeef6","name":"","namespace":"parsers","type":"json","wires":[[{"id":"d37cc093.2c0d","port":0},{"id":"359cd4a4.e636ec","port":0}]],"x":980,"y":60,"z":"af5f5744.c39ba"},{"broker":"9c814888.ebc608","id":"359cd4a4.e636ec","name":"","namespace":"mqtt","retain":"","topic":"msghomegear/GetHeatingWeekProfile","type":"mqtt-out","wires":[],"x":1275,"y":70,"z":"af5f5744.c39ba"}]